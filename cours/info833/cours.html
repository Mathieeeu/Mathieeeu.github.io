<!DOCTYPE html><html><head>
      <title>cours</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\doche\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.15\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="info833---syst√®mes-distribu√©s-√†-large-√©chelle">INFO833 - Syst√®mes distribu√©s √† large √©chelle </h1>
<h2 id="introduction">Introduction </h2>
<h3 id="principes-des-syst√®mes-distribu√©s">Principes des syst√®mes distribu√©s </h3>
<ul>
<li><strong>Probl√®mes</strong> :
<ul>
<li>Dynamisme (hardware / software) : pannes, ajout de ressources, ...</li>
<li>Localisation et allocation des ressources : o√π ex√©cuter une t√¢che ?</li>
<li>Concurrence : partage de ressources, acc√®s concurrents, ...</li>
<li>Asynchronisme : ordre des √©v√©nements, ...</li>
</ul>
</li>
<li><strong>Objectifs</strong> :
<ul>
<li>R√©silience/disponibilit√© : tol√©rance aux pannes, ...</li>
<li>Transparence : l'utilisateur n'a pas besoin de savoir o√π est ex√©cut√©e une t√¢che ou comment est stock√©e une ressource</li>
<li>Efficacit√© : performance, scalabilit√©, ...</li>
<li>Ouverture (Pour permettre de collaborer)</li>
<li>Scalabilit√© (capacit√© √† s'adapter √† une augmentation de charge)</li>
</ul>
</li>
<li><strong>Obstacles</strong> :
<ul>
<li>Le r√©seau doit √™tre fiable (pas de perte de paquets (accus√© de r√©ception))</li>
<li>Le r√©seau doit √™tre s√©curis√©</li>
<li>Le r√©seau doit √™tre homog√®ne (tout le monde doit recevoir les m√™mes informations)</li>
<li>La topologie ne doit pas changer</li>
<li>La latence doit √™tre nulle</li>
<li>La bande passante doit √™tre infinie</li>
<li>Le co√ªt de transport doit √™tre nul</li>
<li>Il ne doit y avoir qu'un administrateur</li>
</ul>
</li>
</ul>
<h3 id="histoire">Histoire </h3>
<ul>
<li>Ann√©es 60 : premiers clusters de machines</li>
<li>1985 : Micro-processors et r√©seaux haute-vitesse ‚áí permet les premiers syst√®mes distribu√©s</li>
<li>Ann√©es 90 : Grid computing</li>
<li>Ann√©es 2000 : Datacenters</li>
<li>2006-2010 : Explosion du cloud</li>
<li>2020 : Edge/Fog computing (edge : faire du calcul au plus proche de l'utilisateur (dans un smartphone, une box, un <em>radiateur</em>) et fog : m√©lange de cloud et edge)</li>
<li>Aujourd'hui : SmartNIC (Network Interface Card)</li>
</ul>
<h3 id="d√©fition">D√©fition </h3>
<p><strong>Un syst√®me distribu√© est un ensemble de machines ind√©pendantes qui apparaissent √† l'utilisateur comme un seul syst√®me coh√©rent.</strong></p>
<p>Caract√©ristiques :</p>
<ul>
<li><strong>Multiples composants autonomes</strong> : chaque machine a son propre processeur, m√©moire, disque, ...</li>
<li><strong>Des ressources pourraient ne pas √™tre disponibles</strong> : s'organiser en pr√©voyant qu'il puisse y avoir des d√©faillances</li>
<li><strong>Processus concurrents</strong></li>
<li><strong>Plusieurs points de contr√¥le</strong></li>
<li><strong>Plusieurs points de d√©faillance</strong></li>
</ul>
<h2 id="client--serveur">Client / Serveur </h2>
<p>C'est le comportement standard sur Internet.</p>
<p><img src="images/client-server.png" alt="Client-serveur"></p>
<h3 id="configurations-possibles">Configurations possibles </h3>
<ul>
<li>1 serveur et N clients</li>
<li>M serveurs et 1 client</li>
<li>M serveurs et N clients</li>
<li>Un serveur peut aussi √™tre un client</li>
</ul>
<h3 id="limitations">Limitations </h3>
<ul>
<li><strong>Passage √† l'√©chelle</strong> : le serveur peut √™tre surcharg√©</li>
<li><strong>Tol√©rance aux pannes</strong> : si le serveur tombe, tout le monde tombe</li>
</ul>
<h2 id="r√©seaux-peer-to-peer">R√©seaux peer-to-peer </h2>
<p>Tout le monde peut √™tre client ou serveur :</p>
<ul>
<li>Avantages en scalabilit√© et en fiabilit√© (reliability)</li>
<li>Diff√©rentes topologies (plate, anneau (DHTs), hi√©rarchique)</li>
</ul>
<h3 id="fonctionalit√©s">Fonctionalit√©s </h3>
<ul>
<li><strong>Dynamicit√©</strong> :</li>
<li><strong>D√©couverte dynamique de pairs et ressources</strong> : <em>Comment on sait o√π se trouve un fichier particulier sachant qu'on ne connait que quelques voisins ?</em></li>
<li><strong>Scalabilit√©</strong> : Plus il y a de pairs, plus le r√©seau est performant</li>
<li><strong>Disponibilit√©</strong> : Les pairs sont interchangeables (replication)</li>
</ul>
<p>Comment faire avec une vue locale du r√©seau ?<br>
‚Üí Le r√©seau P2P construit un overlay (r√©seau logique de <em>"qui connait qui ?"</em>)</p>
<h3 id="r√©pertoire-central">R√©pertoire central </h3>
<ul>
<li>Un serveur central qui conna√Æt tout le monde</li>
<li>Le cout de la recherche est faible</li>
<li>R√©ponse exacte</li>
<li>On peut faire des requ√™tes complexes (√† plusieurs attributs)</li>
<li>MAIS faible tol√©rance aux pannes (si le serveur tombe, tout le monde tombe)
<ul>
<li>Les solutions pour contourner √ßa (workarounds) sont co√ªteuses</li>
<li>√áa va √† l'encontre de la philosophie du P2P</li>
</ul>
</li>
<li>Pas d'overlay, pas de graphe √† maintenir</li>
<li>Exemple : Le premier syst√®me P2P (Napster) avait un server central</li>
</ul>
<h3 id="flooding">Flooding </h3>
<ul>
<li>
<p>Chaque pair envoie la requ√™te √† tous ses voisins<br>
<img src="images/flooding.png" alt="Sch√©ma flooding"></p>
</li>
<li>
<p>Caract√©ristiques :</p>
<ul>
<li>Haute tol√©rance aux pannes</li>
<li>Couteux en nombre de messages</li>
<li>R√©ponses partielles (Des fois on ne trouve pas le fichier parce qu'il faut faire plus de sauts que ce qu'on a choisi comme maximum)</li>
</ul>
</li>
<li>
<p>Exemple : GNutella</p>
</li>
</ul>
<h3 id="approche-hybride">Approche hybride </h3>
<ul>
<li>
<p>On a des super-peers qui connaissent tous les pairs autour d'eux et qui se connaissent entre eux.</p>
</li>
<li>
<p>Caract√©ristiques :</p>
<ul>
<li>Nombre r√©duit de messages (compar√© au flooding)</li>
<li>Meilleure tol√©rance aux pannes (compar√© au r√©pertoire central)</li>
<li>R√©ponses partielles (comme le flooding)</li>
<li>La d√©tection de super-peers est un probl√®me</li>
</ul>
</li>
</ul>
<p><img src="images/hybrid.png" alt="Sch√©ma hybride"></p>
<h3 id="distributed-hash-tables-dhts">Distributed Hash Tables (DHTs) </h3>
<p>Le vrai probl√®me du P2P est de trouver une ressource dans un r√©seau distribu√©</p>
<ul>
<li>API simple : <code>get(key)</code>, <code>put(key, value)</code></li>
<li>Recherche de donn√©e efficace</li>
<li>M√©canisme de healing (si un pair tombe, on peut le remplacer)</li>
<li>R√©sistance au churn (les pairs qui se connectent et se d√©connectent)</li>
</ul>
<h4 id="principes">Principes </h4>
<ul>
<li>
<p><strong>Chaque pair a un identifiant unique</strong> : anneau logique ou key-based routing (KBR)</p>
</li>
<li>
<p><strong>Chaque donn√©e a un identifiant unique</strong> :</p>
</li>
<li>
<p>Il y a toujours un noeud responsable de chaque donn√©e (si on s'en va, on doit donner la responsabilit√© √† quelqu'un d'autre)</p>
</li>
<li>
<p>Le plus proche voisin est celui qui a l'identifiant le plus proche</p>
</li>
<li>
<p>Les voisins les plus proches font partie du <em>leafset</em></p>
</li>
<li>
<p>Bonne distribution de la charge/pas d'index (localisation implicite)</p>
</li>
</ul>
<h4 id="avantages">Avantages </h4>
<ul>
<li>
<p><strong>Approche 100% distribu√©e</strong> : pas de serveur central</p>
</li>
<li>
<p><strong>Localisation efficace et exacte</strong></p>
</li>
<li>
<p><strong>Equilibre de charges</strong></p>
</li>
<li>
<p><strong>Tr√®s bonne scalabilit√©</strong> : il faut log(n) sauts pour trouver une donn√©e</p>
</li>
<li>
<p><strong>MAIS</strong> si on veut faire des range queries (par exemple, trouver toutes les donn√©es entre 2 bornes), c'est plus compliqu√©</p>
</li>
</ul>
<h4 id="placement-des-donn√©es">Placement des donn√©es </h4>
<ul>
<li>Deux solutions principales :
<ul>
<li>Contiguous : on place les donn√©es de mani√®re contigu√´ (comme un anneau)</li>
<li>Non-contiguous : la donn√©e est r√©partie de mani√®re al√©atoire parmi les pairs</li>
</ul>
</li>
</ul>
<p><img src="images/data-placement.png" alt="Data placement in DHTs"></p>
<ul>
<li>L'insersion de donn√©e est plus simple dans le cas non-contiguous</li>
<li>Il faut d√©placer des donn√©es √† chaque ajout/suppression de pair dans le cas contiguous (un d√©placement peut √™tre tr√®s co√ªteux)</li>
</ul>
<p><img src="images/add-data-dht.png" alt="Add data in DHTs"></p>
<h3 id="localisation-des-donn√©es-dans-un-syst√®me-p2p">Localisation des donn√©es dans un syst√®me P2P </h3>
<ul>
<li><strong>Centralis√©</strong> :<br>
+ Nombre de messages<br>
+ R√©ponse exacte<br>
- Tol√©rance aux pannes</li>
<li><strong>Flooding</strong> :<br>
+ Tol√©rance aux pannes<br>
- Nombre de messages<br>
- R√©ponse exacte</li>
<li><strong>Hybride</strong> :<br>
+ Nombre de messages<br>
+ Tol√©rance aux pannes<br>
- R√©ponse exacte</li>
<li><strong>DHTs</strong> :<br>
+ Nombre de messages<br>
+ Tol√©rance aux pannes<br>
+ R√©ponse exacte<br>
- Requ√™tes complexes</li>
</ul>
<h3 id="propri√©t√©s-des-r√©seaux-p2p">Propri√©t√©s des r√©seaux P2P </h3>
<ul>
<li>
<p>Bas√©s sur les <strong>overlay networks</strong> : r√©seau logique construit par dessus le r√©seau physique ("qui connait qui ?") ‚áí Si chaque noeud connait ses voisins, √ßa forme un graphe</p>
</li>
<li>
<p>Besoin de redondance (plusieurs chemins entre deux points) pour la tol√©rance aux pannes</p>
</li>
<li>
<p>Besoin de liens sp√©cifiques (notamment entre les super-peers, les noeuds qui communiquent le plus...)</p>
</li>
<li>
<p><strong>Topologies d'overlay</strong> :</p>
<ul>
<li>Graphes al√©atoires</li>
<li>Graphes complets</li>
<li>Guid√©e par l'application (exemple : Solipsis, un monde virtuel o√π les noeuds sont proches s'ils sont proches dans le monde virtuel)</li>
<li>Anneaux/grid/tors/hypercubes...</li>
<li>Hi√©rarchiques</li>
<li>Multi-overlay (plusieurs overlay pour diff√©rentes fonctions (exemple : un overlay pour la proximit√© g√©ographique et un autre pour la proximit√© des contacts de t√©l√©phone dans un jeu vid√©o))</li>
</ul>
</li>
<li>
<p><strong>Objectif</strong> :</p>
<ul>
<li>Tous les noeuds doivent √™tre connect√©s au moins une fois</li>
<li>Le diam√®tre du graphe doit √™tre petit (le nombre de sauts minimal pour aller d'un point √† un autre doit √™tre petit ‚áí Propri√©t√© de <strong>petit monde</strong>)</li>
<li>Les liens doivent √™tre application-aware (les liens sont choisis en fonction de l'application)</li>
<li>Les liens doivent prendre en compte le r√©seau physique (√©viter de faire 18 allers-retours entre la France et l'Australie pour trouver une donn√©e)</li>
<li>Routing bas√© sur des cl√©s (KBR)</li>
</ul>
</li>
<li>
<p><strong>Op√©rations</strong> :</p>
<ul>
<li>Arriv√©e de nouveaux noeuds</li>
<li>D√©part de noeuds (avec ou sans avertissement)</li>
<li>Maintenance de l'overlay</li>
<li>√ätre capable de trouver une donn√©e</li>
</ul>
</li>
</ul>
<h2 id="tol√©rance-aux-fautes">Tol√©rance aux fautes </h2>
<h3 id="fautes">Fautes </h3>
<h4 id="diff√©rents-types-de-fautes">Diff√©rents types de fautes </h4>
<ul>
<li><strong>Crash</strong> : La machine a cram√©, elle est plus l√†, c'est ff</li>
<li><strong>Crash recovery</strong> : La machine a cram√© mais elle pourrait revenir
<ul>
<li><em>Probl√®me : on revient avec une donn√©e qui n'est plus √† jour, et en plus elle a √©t√© d√©plac√©e lors du crash...</em></li>
<li><em>Solution : on demande √† la machine d'oublier la ressource, c'est plus elle qui la g√®re</em></li>
</ul>
</li>
<li><strong>Omissions</strong> : La machine agit selon ses sp√©cifications mais pas tout le temps (perte de message)</li>
<li><strong>Byzantine</strong> : La machine fait n'importe quoi
<ul>
<li><em>Solution : On multiplie les requ√™tes pour √™tre s√ªr de la r√©ponse en moyenne</em></li>
</ul>
</li>
</ul>
<p><em>Il faut savoir que les crashs sont des omissions, qui sont des byzantines (Crash (/recovery) &lt; Omission &lt; Byzantine)</em></p>
<h4 id="cons√©quences-des-fautes">Cons√©quences des fautes </h4>
<ul>
<li>Perte de donn√©es</li>
<li>Perte du calcul (s'il n'a pas enregistr√© son √©tat)</li>
<li>Deadlock (si un noeud attend une r√©ponse qui ne viendra jamais)</li>
<li>Incoh√©rences (si on recr√©e un jeton alors que le pr√©c√©dent n'a pas √©t√© d√©truit)</li>
<li>Security hole</li>
</ul>
<h4 id="d√©tection-des-fautes">D√©tection des fautes </h4>
<ul>
<li><strong>Lazy</strong> : Si on ne re√ßoit pas de r√©ponse, on consid√®re que le noeud est mort</li>
<li><strong>Heartbeat</strong> : On envoie un message r√©guli√®rement pour dire qu'on est vivant</li>
<li><strong>Ping</strong> : On demande aux autres noeuds s'ils sont vivants r√©guli√®rement</li>
</ul>
<h4 id="scalabilit√©">Scalabilit√© </h4>
<p>Plus il y a de noeuds, plus il y a de chances qu'un noeud tombe.</p>
<ul>
<li><strong>Hi√©rachique</strong> : Partition des noeuds en groupes, monitoring local (all-to-all) ou global (one-to-one)</li>
<li><strong>Probabiliste</strong> : On ping al√©atoirement des noeuds √† chaque round (et on fait parcourir la liste des suspects)</li>
<li><strong>Anneau</strong></li>
<li><strong>Overlay pair-√†-pair</strong> : chacun surveille ses voisins</li>
</ul>
<h3 id="d√©tection-des-fautes-1">D√©tection des fautes </h3>
<h4 id="crashes">Crashes </h4>
<p>On utilise le heartbeat ou ping pour d√©tecter d'eventuels timeouts mais c'est compliqu√© de savoir si c'est un crash ou un d√©lai √©lev√©...</p>
<h4 id="omissions">Omissions </h4>
<p>On peut d√©tecter et corriger des omissions en utilisant des :</p>
<ul>
<li>Messages num√©rot√©s</li>
<li>Acknowledgements</li>
<li>Re-√©mission</li>
</ul>
<h3 id="solution-g√©n√©ralement-utilis√©e-la-redondance">Solution g√©n√©ralement utilis√©e, la redondance </h3>
<ul>
<li>Pour les donn√©es : on a plusieurs copies de la m√™me donn√©e</li>
<li>Pour les calculs : on a plusieurs noeuds qui font le m√™me calcul (r√©plication)</li>
<li>Pour les communications : on fait des checkpoints/restart (on sauvegarde l'√©tat du noeud r√©guli√®rment)</li>
</ul>
<h2 id="checkpointing">Checkpointing </h2>
<h3 id="rollback-recovery">Rollback-recovery </h3>
<p><strong>Checkpointing</strong> : On sauvegarde l'√©tat de la m√©moire d'un processus de mani√®re √† pouvoir le restaurer plus tard</p>
<p>Dans un cas √† plusieurs processus (communication), il faut que tout le monde rollback vers le m√™me √©tat (sinon √ßa ne sert √† rien)</p>
<p>Pour r√©duire le co√ªt du checkpointing :</p>
<ul>
<li>on peut ne sauvegarder que les donn√©es qui ont chang√© depuis le dernier checkpoint.</li>
<li>on peut faire des checkpoints quand l'empreinte est faible (quand il n'y a pas beaucoup de messages en attente)</li>
</ul>
<h3 id="effet-domino">Effet domino </h3>
<p>Si un noeud rollback, il faut que tous les noeuds qui ont re√ßu un message de ce noeud rollback aussi. √áa peut entrainer une r√©action en chaine qui renvoie le syst√®me  l'√©tat initial. L'id√©al pour √©viter √ßa est de faire un checkpoint global de temps en temps, pour faire une ligne de recouvrement (<em><u>recovery line</u> : un √©tat global dans lequel il n'y a pas de message re√ßu sans avoir √©t√© √©mis pr√©c√©demment</em>)</p>
<p><img src="images/effet-domino.png" alt="Effet domino"></p>
<h3 id="types-de-checkpoints">Types de checkpoints </h3>
<p><strong>Checkpointing non-coordonn√©</strong> :<br>
Chaque noeud fait ses propres checkpoints mais il faut tout synchroniser parfois pour √©viter l'effet domino.</p>
<ul>
<li>Objectif : Trouver la ligne de recouvrement la plus r√©cente.</li>
<li>On cherche un graphe de d√©pendance directe entre les checkpoints (chaque processus se rappelle de qui il d√©pend, c√†d de qui il a re√ßu un message).</li>
<li>R√©cup√©ration :
<ol>
<li>Envoi d'une requ√™te.</li>
<li>Collecte du graphe de d√©pendances local.</li>
<li>Calculer la ligne de recouvrement.</li>
<li>Restaurer les √©tats depuis les checkpoints.</li>
</ol>
</li>
</ul>
<p><strong>Checkpointing coordonn√©</strong> :<br>
Un noeud est d√©sign√© pour dire √† tout le monde de faire un checkpoint. C'est plus simple mais √ßa peut √™tre un point de d√©faillance.</p>
<ul>
<li>
<p>Avanatage : il ne faut stocker qu'un seul checkpoint par noeud.</p>
</li>
<li>
<p>Processus :</p>
<ol>
<li>Un coordinateur broadcast une requ√™te de checkpoint.</li>
<li>D√®s qu'un noeud re√ßoit la requ√™te, il envoie un "checkpoint ready" au coordinateur.</li>
<li>D√®s que le coordinateur a re√ßu tous les "checkpoint ready", il envoie un "checkpoint do" et tout le monde fait un checkpoint et envoie "checkpoint done" au coordinateur.</li>
<li>Quand le coordinateur a re√ßu tous les "checkpoint done", il envoie "checkpoint commit" pour faire redemarrer tous les processus en cours.</li>
</ol>
</li>
<li>
<p>Probl√®me : √ßa stoppe tout le monde pendant un moment.</p>
</li>
<li>
<p><u>Algorithme de Chandy-Lamport</u> :<br>
<em>Permet de faire un checkpoint global sans arr√™ter le syst√®me (non-bloquant)</em></p>
<ol>
<li>Le processus observateur (celui qui initie la prise d'√©tat) enregistre son √©tat courant et envoie une requ√™te qui contient un "marqueur d'√©tat" √† tous les autres processus.</li>
<li>Un processus qui re√ßoit un "marqueur d'√©tat" pour la premi√®re fois envoie son √©tat courant au processus observateur et ajoute √† chaque message un "marqueur d'√©tat" pour aider √† la propagation.</li>
<li>Lorsqu'un processus ayant d√©j√† effectu√© sa prise d'√©tat re√ßoit un message qui n'a pas de marqueur d'√©tat, il le transmet tel quel √† l'observateur (car il doit quand m√™me √™tre pris en compte comme il a √©t√© envoy√© avant la prise d'√©tat globale).</li>
</ol>
<p><u>Sch√©ma</u> : Ici, P3 est l'observateur et P1 et P2 sont les processus qui envoient leur √©tat √† P3.<br>
<img src="images/chandy-lamport.png" alt="Chandy-Lamport"></p>
</li>
</ul>
<p><strong>Jounalisation (Logging)</strong> :<br>
On √©crit tout ce qu'il se passe dans une sorte de journal. Si un noeud tombe, on peut rejouer le journal pour retrouver l'√©tat du syst√®me sans d√©ranger les autres.</p>
<p><u>Piecewise deterministic (PWD)</u> (d√©terministe par morceaux) :</p>
<ul>
<li>Certaines parties de l'application sont deterministes (on peut les rejouer)</li>
<li>On ne journalise que les parties non-deterministes (les entr√©es/sorties, les messages re√ßus, ...)</li>
</ul>
<p>Deux approches :</p>
<ul>
<li>Pessimiste : on journalise tous les messages re√ßus et on d√©tecte les r√©-√©missions.</li>
<li>Optimiste : on journalise les messages re√ßus en m√©moire et on les √©crit p√©riodiquement sur un stockage stable (effet domino possible).</li>
</ul>
<p><strong>Communication induced</strong> :</p>
<ul>
<li>Utilisation de checkpoints non-coordonn√©s + de checkpoints forc√©s</li>
<li>Les checkpoints forc√©s limitent l'effet domino.</li>
<li>Pour r√©duire le nombre de checkpoints, on utilise un <em>Direct dependancy vector</em> (DDV) qui a :
<ul>
<li>Une entr√©e par noeud,</li>
<li>Chaque noeud incr√©mente son propre num√©ro de s√©quence at chaque checkpoint.</li>
<li>Quand un message est re√ßu, on v√©rifie si un checkpoint devrait √™tre forc√© (si le num√©ro de s√©quence de l'envoyeur est plus grand que le num√©ro de s√©quence du noeud qui l'a re√ßu)</li>
</ul>
</li>
</ul>
<p><u>Sch√©ma</u> : ici, C1 ne change pas son num√©ro de s√©quence car il ne re√ßoit pas de message. C2 change le sien une premi√®re fois puis une deuxi√®me fois + checkpoint forc√© quand il re√ßoit le second message de C1.<br>
<img src="images/communication-induced.png" alt="Communication induced"><br>
<em>pas super compris cette partie üò¶</em></p>
<h2 id="broadcasting">Broadcasting </h2>
<h3 id="d√©finition-et-motivation">D√©finition et motivation </h3>
<p>Un <strong>broadcast</strong> est une op√©ration o√π un processus envoie un message √† tous les autres processus d'un groupe.</p>
<p>Sert beaucoup dans les communications parall√®les (all-to-all par exemple) et pour les services de r√©plication (pour que tout le monde ait la m√™me donn√©e).</p>
<p><strong>Primitive de broadcast</strong> :</p>
<ul>
<li>Le m√™me message doit √™tre envoy√© √† tous les membres du groupe (exp√©diteur inclus)</li>
<li>Le nombre de membres et leur identit√© doivent rester cach√©s.</li>
<li><u>Primitive transparente</u> : on ne se pr√©occupe pas de savoir qui est dans le groupe, ni qui ils sont.</li>
</ul>
<p><strong>Deux types de <em>group membership</em></strong> :</p>
<ul>
<li><u>Statique</u> : le groupe est fixe.</li>
<li><u>Dynamique</u> : les membres peuvent rejoindre le groupe ou le quitter.</li>
</ul>
<p><strong>Probl√®mes</strong> :</p>
<ul>
<li>Les processus peuvent crash (aussi pendant le broadcast)</li>
<li>L'ordre des messages peut √™tre diff√©rente selon les noeuds (la latence peut varier)</li>
<li><u>Solution possible</u> :
<ul>
<li>Ajout d'une garantie pour que chaque message soit bien d√©livr√©</li>
<li>Ajout d'une garantie pour l'ordre.</li>
</ul>
</li>
</ul>
<p><strong>Diffusion inter-processus</strong> :</p>
<ul>
<li><u>Communications point-√†-point</u> : chaque processus envoie un message √† un autre processus.</li>
<li>Un processus peut √©chouer (<em>fail-stop model</em>), ils sont soit "<em>correct</em>" soit "<em>faulty</em>" pendant l'ex√©cution.</li>
</ul>
<h3 id="propri√©t√©s-dun-broadcast">Propri√©t√©s d'un broadcast </h3>
<ul>
<li>Garanties de livraison : best-effort, reliable broadcast, uniform reliable broadcast.</li>
<li>Garanties d'ordre : FIFO, causal, total.<br>
Toutes les combinaisons de ces propri√©t√©s sont possibles.</li>
</ul>
<h4 id="best-effort-broadcast">Best-effort broadcast </h4>
<p>Chaque processus <em>correct</em> (qui ne crash pas) a d√©livr√© le message <u>si</u> l'envoyeur est <em>correct</em>.</p>
<h4 id="reliable-broadcast">Reliable broadcast </h4>
<p>Si l'envoyeur est <em>correct</em>, alors chaque processus <em>correct</em> d√©livre le message. Si l'envoyeur est <em>faulty</em>, alors soit tous les processus <em>correct</em> d√©livrent le message, soit aucun ne le d√©livre.</p>
<p>Chaque message est estampill√© avec un num√©ro de s√©quence unique (l'identit√© de l'√©metteur).<br>
Algorithme :</p>
<pre data-role="codeBlock" data-info="pseudo" class="language-pseudo pseudo"><code>Processus P : 
    seq#(m) : num√©ro de s√©quence
    Variable locale : rec = ‚àÖ

Real_broadcast(m) : 
    estampiller m avec sender(m) et seq#(m) // envoyer m √† tous les prcessus y compris P

upon-recv(m) do
    if m ‚àâ rec then 
        rec ‚à™= {m}
        if sender(m) != p then 
            envoeyr m √† tous les processus sauf p 
        Real_deliver(m) // d√©livrer le message
</code></pre><h4 id="uniform-reliable-broadcast">Uniform reliable broadcast </h4>
<p>Propri√©t√© uniforme : implique tous les processus, les <em>correct</em> et les <em>faulty</em>.</p>
<ul>
<li>Si un message m est d√©livr√© par un processus (correct ou faulty), alors tous les processus corrects vont √©ventuellement d√©livrer m.</li>
<li>Si l'√©metteur plante, alors le messgae ne pourra pas √™tre d√©livr√© par contre, donc on peut utiliser des ACKs (je crois, on le verra en TD)</li>
</ul>
<h4 id="garanties-dordre-de-livraison">Garanties d'ordre de livraison </h4>
<ul>
<li>
<p><strong>Ordre total</strong> : tous les processus d√©livrent le m√™me set de messages dans le m√™me ordre.</p>
</li>
<li>
<p><strong>FIFO</strong> (pour une seule source uniquement le FIFO) : si un processus envoie m1 avant m2, alors tous les processus corrects d√©livrent m1 avant m2.</p>
</li>
<li>
<p><strong>Ordre causal</strong> : si le broadcast m1 arrive causalement avant un autre broadcast m2, alors chaque processus correct qui d√©livre m2 devra d'abord d√©livrer m1. A chaque broadcast, on ajoute un vecteur d'horloge qui est incr√©ment√© √† chaque broadcast pour savoir si un message est causalement avant un autre.</p>
</li>
</ul>
<p><em>L'ordre causal implique l'ordre FIFO (mais pas l'inverse).</em></p>
<h3 id="broadcasting-√†-large-√©chelle">Broadcasting √† large √©chelle </h3>
<p>Les m√©canismes de broadcast ne scalent pas tr√®s bien, ils n'ont que des connaissances partielles du groupe, les groupes √©voluent fr√©quemment et le broadcast prend du temps.</p>
<p><strong>Gossiping</strong> (bavardage) : protocole de diffusion qui consiste √† envoyer un message √† des voisins al√©atoires et √† les faire propager √† leur tour. C'est un protocole probabiliste qui converge vers une distribution uniforme des messages en g√©n√©ral.</p>
<h2 id="r√©plication-de-donn√©es">R√©plication de donn√©es </h2>
<h3 id="d√©finition-et-motivation-1">D√©finition et motivation </h3>
<ul>
<li><strong>Fiabilit√©</strong> : durabilit√© et disponibilit√© des donn√©es</li>
<li><strong>Performance</strong> : latence et localisation des donn√©es, √©quilibrage de charge</li>
</ul>
<p><strong>Probl√®mes/d√©fis</strong> :</p>
<ul>
<li>Combien de copies faire ?</li>
<li>O√π les stocker ? (data placement)</li>
<li>Comment les localiser ? (data localization)</li>
<li>Comment les maintenir (replication degree, distributed indexes...) ?</li>
<li>Comment assurer la coh√©rence ?</li>
</ul>
<p>Le data placement doit √™tre :</p>
<ul>
<li>dirig√© par le middleware</li>
<li>fiable (fiabilit√© des noeuds, r√©g√©n√©ration (healing) des donn√©es)</li>
<li>performant (patterns d'acc√®s, synchronisation des donn√©es)</li>
<li>dynamique (monitoring des acc√®s aux donn√©es, de la r√©silience des noeuds (depuis combien de temps ils fonctionnent sans probl√®me?)</li>
</ul>
<p>La data localization peut avoir deux mod√®les :</p>
<ul>
<li>Fourni par l'overlay/le middleware/la topologie (DHT) : contraintes de placement, requ√™tes compl√®tes mais performant</li>
<li>Index distribu√©s : contraintes de placements plus relach√©es, requ√™tes complexes plus faciles, besoin de maintenance</li>
</ul>
<p><strong>R√©cup√©rer des donn√©es</strong></p>
<ul>
<li>Avec ou sans maintenance : Fountain code, lazy monitoring</li>
<li>Gu√©rir le syst√®me (cr√©er des nouvelles copies pour remplacer les perdues) : Imm√©diatelment (ASAP) ou diff√©r√©e</li>
<li>Que faire des fausses d√©tections ?</li>
</ul>
<h3 id="propagation-des-updates">Propagation des updates </h3>
<ul>
<li>Single writer (ou writer qui poss√®de un token)</li>
<li>Multi-writer (avec des conflits possibles, donc il faut un m√©canisme de r√©solution de conflits)</li>
</ul>
<h2 id="evaluation-des-syst√®mes-distribu√©s-√†-large-√©chelle">Evaluation des syst√®mes distribu√©s √† large √©chelle </h2>
<h3 id="probl√®mes">Probl√®mes </h3>
<p><strong>Experience en temps r√©el</strong> :</p>
<ul>
<li>Besoin d'avoir des acc√®s de nombreux noeuds distribu√©s</li>
<li>Besoin de pr√©voir le comportement des utilisateurs/des applications</li>
<li>Cher</li>
</ul>
<h3 id="solutions-possibles">Solutions possibles </h3>
<p><strong>Construire des plateformes d'√©valuation (√©muler un grand nombre de noeuds, environnement controll√©)</strong></p>
<p><strong>Utilisation de plateformes distribu√©es (√©mulation, virtualisation)</strong></p>
<ul>
<li>Sites distribu√©s g√©ographiquement</li>
<li>multiples entit√©s virtuelles sur chaque machine physique</li>
<li>outils d'√©mulation de r√©seau (ajout de latence, reduction de bandepassante, perte de paquets, ...)<br>
Problemes : besoin d'y avoir acc√®s, cher, difficile √† utiliser/debug/reproduire</li>
</ul>
<p><strong>Simulation √† √©venement discret</strong><br>
L'id√©e c'est de ne pas utiliser le vrai code, mais de faire une simulationS<br>
Le principe c'est d'avoir :</p>
<ul>
<li>un temps discret</li>
<li>deux entit√©s (nodes (machine/process/device/user...) et event (message, timer...))</li>
<li>le temps progresse uniquement quand il y a un √©venement</li>
<li>chaque √©venement a un label avec "qui est le recepteur" et "quand il doit arriver"</li>
<li>√† chaque instant, on regarde chaque √©venement et on v√©rifie juste s'ils doivent √™tre envoy√©s et √† qui</li>
</ul>
<p>Avantages :</p>
<ul>
<li>Faible temps de calcul</li>
<li>possibilit√© d'enregistrer l'√©tat du syst√®me (pour l'arreter et le restart)</li>
<li>simulation reproductible</li>
<li>possitilit√© de tricher</li>
</ul>
<p>Inconv√©nients :</p>
<ul>
<li>c'est un mod√®le du syst√®me qui est evalu√©, pas le syst√®me lui-m√™me</li>
<li>peut etre plus lent que la r√©alit√© s'il y a beaucoup de noeuds/events</li>
<li>difficile de choisir le bon niveau d'abstraction</li>
<li>possibilit√© de tricher</li>
</ul>
<p>Limiter l'impact sur la m√©moire :</p>
<ul>
<li>Fusionner les protocoles</li>
<li>D√©livrer les messages <em>√† peu pr√®s</em> √† la bonne heure (pour en livrer plusieurs √† la fois)</li>
<li><em>Attention aux effets de bord</em></li>
</ul>

      </div>
      
      
    
    
    
    
    
    
  
    </body></html>